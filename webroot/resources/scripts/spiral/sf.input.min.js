!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("sf"));else if("function"==typeof define&&define.amd)define(["sf"],t);else{var n=t("object"==typeof exports?require("sf"):e.sf);for(var s in n)("object"==typeof exports?exports:e)[s]=n[s]}}(this,function(e){return function(e){function t(s){if(n[s])return n[s].exports;var r=n[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),o=s(r),i=n(6),a=s(i);o["default"].instancesController.registerInstanceType(a["default"],"sf-js-input"),e.exports=a["default"]},function(t,n){t.exports=e},,function(e,t,n){"use strict";e.exports={"default":n(4),__esModule:!0}},function(e,t,n){"use strict";var s=n(5);e.exports=function(e,t){return s.create(e,t)}},function(e,t){"use strict";var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=n(3),o=s(r);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(1),a=s(i),u=function(e,t,n){this._construct(e,t,n)};u.prototype=(0,o["default"])(a["default"].modules.core.BaseDOMConstructor.prototype),u.prototype.name="input",u.prototype._construct=function(e,t,n){this.init(e,t,n),n&&(this.options=e.tools.extend(this.options,n)),this.els={node:t},this.options.prefix?(this.setPrefix(),this.addPrefixEventListeners()):this.options.pattern&&(this.setupPattern(),this.addPatternEventListeners())},u.prototype.optionsToGrab={pattern:{domAttr:"data-pattern"},prefix:{domAttr:"data-prefix"}},u.prototype.isValidPattern=function(){return this.els.node.value.match(this.pattern)},u.prototype.addPatternEventListeners=function(){var e=this;this._inputKeyPress=function(t){var n=String.fromCharCode(t.keyCode),s=e.els.node.value,r=e.getCursorPosition();if(n.length>0){t.preventDefault();for(var o=1,i=r;i<s.length&&-1!==e.formatCharacters.indexOf(s[i]);i++)o++;var a=s.substring(0,r+o-1)+n+s.substring(r+o,s.length);return a.match(e.patternWithEmpty)?(e.els.node.value=a,e.setCursorPosition(r+o),!1):!1}return!0},this.els.node.addEventListener("keypress",this._inputKeyPress),this._inputFocus=function(t){t.preventDefault(),setTimeout(function(){""==e.els.node.value&&(e.els.node.value=e.patternString.replace(/[^\-\(\)\[\]\:\.\,\$\%\@\ \/]/g,"_"),e.setCursorPosition(0))},0)},this.els.node.addEventListener("focus",this._inputFocus),this._inputKeyDown=function(t){var n=String.fromCharCode(t.keyCode),s=e.els.node.value,r=e.getCursorPosition();if(8==t.keyCode||46==t.keyCode){t.preventDefault();for(var o=0,i=r-1;i>0&&-1!==e.formatCharacters.indexOf(s[i]);i--)o--;var a=s.substring(0,r+o-1)+"_"+s.substring(r+o,s.length);return a.match(e.patternWithEmpty)?(console.log(a),e.els.node.value=a,e.setCursorPosition(r+o-1),!1):!1}return n.match(/\W/)?!1:!0},this.els.node.addEventListener("keydown",this._inputKeyDown),this._inputBlur=function(t){e.els.node.value.match(e.pattern)||(e.els.node.value="")},this.els.node.addEventListener("blur",this._inputBlur)},u.prototype.getCursorPosition=function(){var e=0;if(document.selection){this.els.node.focus();var t=document.selection.createRange();t.moveStart("character",-this.els.node.value.length),e=t.text.length}else(this.els.node.selectionStart||"0"===this.els.node.selectionStart)&&(e=this.els.node.selectionStart);return e},u.prototype.setCursorPosition=function(e){if(this.els.node.createTextRange){var t=this.els.node.createTextRange();t.move("character",e),t.select()}else this.els.node.selectionStart?(this.els.node.focus(),this.els.node.selectionStart=this.els.node.selectionEnd=e):this.els.node.focus()},u.prototype.setupPattern=function(){this.formatCharacters=this.els.node.getAttribute("data-format-characters")||"-()[]:.,$%@ /",this.patternString=this.options.pattern,this.els.node.placeholder=this.patternString;var e=function(){for(var e="",t="",n=0;n<this.patternString.length;n++){var s=this.patternString[n];this.formatCharacters.indexOf(s)>=0?(e+=s,t+=s):s.match(/[0-9]/)?(e+="[0-9]",t+="([0-9]|_)"):s.match(/[a-zA-Z]/)?(e+="[a-zA-Z]",t+="([a-zA-Z]|_)"):"*"===s&&(e+="[0-9a-zA-Z]",t+="([0-9a-zA-Z]|_)")}this.pattern=new RegExp("^"+e+"$","g"),this.patternWithEmpty=new RegExp("^"+t+"$","g")}.bind(this);e()},u.prototype.addPrefixEventListeners=function(){var e=this;this._inputKeyup=function(){var t=this.getAttribute("data-prefix");0!==e.els.node.value.indexOf(t)&&(e.els.node.value=t+" ")},this.els.node&&this.els.node.addEventListener("keyup",this._inputKeyup)},u.prototype.removePatternEventListeners=function(){this.els.node&&(this.els.node.addEventListener("keypress",this._inputKeyPress),this.els.node.addEventListener("focus",this._inputFocus),this.els.node.addEventListener("keydown",this._inputKeyDown),this.els.node.addEventListener("blur",this._inputBlur))},u.prototype.removePrefixEventListeners=function(){this.els.node&&this.els.node.removeEventListener("keyup",this._inputKeyup)},u.prototype.die=function(){this.options.pattern?this.removePatternEventListeners():this.options.prefix&&this.removePrefixEventListeners(),delete this},u.prototype.setPrefix=function(){this.els.node.value=this.options.prefix+" "+this.els.node.value},t["default"]=u}])});
//# sourceMappingURL=sf.input.min.js.map